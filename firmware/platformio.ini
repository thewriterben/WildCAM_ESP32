; WildCAM_ESP32 v2.0 Advanced PlatformIO Configuration
; Enhanced ESP32 Wildlife Camera Platform with AI/ML Integration
; Author: WildCAM ESP32 Team
; Version: 3.0.0

[platformio]
default_envs = esp32cam_advanced
description = Advanced AI-Powered Wildlife Monitoring Platform

[env]
platform = espressif32@6.4.0
framework = arduino
monitor_speed = 115200
monitor_filters = 
    esp32_exception_decoder
    time
    colorize
board_build.partitions = partitions.csv
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -std=gnu++17
    -fexceptions
    -DWILDCAM_VERSION=\"3.0.0\"
    -DENABLE_ADVANCED_AI=1
    -DENABLE_SECURITY_FEATURES=1
    -DENABLE_MPPT_CONTROL=1
    -DENABLE_YOLO_TINY=1
lib_deps = 
    ; Core ESP32 libraries
    espressif/esp32-camera@^2.0.4
    
    ; Networking and communication
    sandeepmistry/LoRa@^0.8.0
    knolleary/PubSubClient@^2.8.0
    bblanchon/ArduinoJson@^6.21.3
    
    ; AI/ML libraries
    tensorflow/TensorFlow Lite for Microcontrollers@^2.14.0
    
    ; Sensor libraries
    adafruit/Adafruit BME280 Library@^2.2.2
    adafruit/Adafruit SGP30 Sensor@^2.0.0
    adafruit/Adafruit BusIO@^1.14.1
    
    ; Security libraries
    https://github.com/Seeed-Studio/Seeed_Arduino_mbedtls.git
    
    ; Power management and MPPT
    https://github.com/rlogiacco/BatterySense.git
    
    ; Utility libraries
    paulstoffregen/Time@^1.6.1
    mikalhart/TinyGPSPlus@^1.0.3

; Enhanced ESP32-CAM Configuration with Advanced Features
[env:esp32cam_advanced]
board = esp32cam
build_flags = 
    ${env.build_flags}
    -DBOARD_AI_THINKER_CAM
    -DCAMERA_MODEL_AI_THINKER
    -DCONFIG_SPIRAM_CACHE_WORKAROUND
    -DPSRAM_SIZE_8MB
    -DADVANCED_MOTION_DETECTION=1
    -DMULTI_CORE_PROCESSING=1
upload_speed = 460800
board_build.flash_mode = dio
board_build.f_flash = 80000000L
board_build.f_cpu = 240000000L

; ESP32-S3-CAM Configuration (Premium AI Processing)
[env:esp32s3cam_ai]
board = esp32s3dev
build_flags = 
    ${env.build_flags}
    -DBOARD_ESP32S3_CAM
    -DCAMERA_MODEL_ESP32S3_EYE
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DPSRAM_SIZE_8MB
    -DENABLE_DUAL_CORE_AI=1
    -DENABLE_ADVANCED_YOLO=1
    -DMAX_AI_MODELS=5
upload_speed = 921600
board_build.flash_mode = qio
board_build.f_flash = 80000000L
board_build.f_cpu = 240000000L

; TTGO T-Camera Configuration with Display
[env:ttgo-t-camera-display]
board = esp32dev
build_flags = 
    ${env.build_flags}
    -DBOARD_TTGO_T_CAMERA
    -DCAMERA_MODEL_TTGO_T_CAMERA
    -DENABLE_DISPLAY=1
    -DENABLE_TOUCH_INTERFACE=1
upload_speed = 921600

; Power Optimized Configuration for Remote Deployment
[env:esp32cam_lowpower]
board = esp32cam
build_flags = 
    ${env.build_flags}
    -DBOARD_AI_THINKER_CAM
    -DCAMERA_MODEL_AI_THINKER
    -DLOW_POWER_MODE=1
    -DENABLE_DEEP_SLEEP=1
    -DMAX_POWER_CONSUMPTION_MW=500
    -DBATTERY_MONITORING=1
    -DSOLAR_POWER_MGMT=1
upload_speed = 115200
board_build.f_cpu = 160000000L

; Development Configuration with Debug Features
[env:esp32cam_debug]
board = esp32cam
build_flags = 
    ${env.build_flags}
    -DBOARD_AI_THINKER_CAM
    -DCAMERA_MODEL_AI_THINKER
    -DDEBUG_MODE=1
    -DENABLE_SERIAL_DEBUG=1
    -DENABLE_TELNET_DEBUG=1
    -DENABLE_MEMORY_DEBUG=1
    -DCORE_DEBUG_LEVEL=5
debug_tool = esp-prog
debug_init_break = tbreak setup
upload_speed = 921600

; Network Mesh Node Configuration
[env:esp32cam_mesh]
board = esp32cam
build_flags = 
    ${env.build_flags}
    -DBOARD_AI_THINKER_CAM
    -DCAMERA_MODEL_AI_THINKER
    -DENABLE_ESP_MESH=1
    -DMESH_NODE=1
    -DMAX_MESH_NODES=20
    -DENABLE_MESH_ENCRYPTION=1
    -DENABLE_LOAD_BALANCING=1
upload_speed = 460800

; Satellite Communication Configuration
[env:esp32cam_satellite]
board = esp32cam
build_flags = 
    ${env.build_flags}
    -DBOARD_AI_THINKER_CAM
    -DCAMERA_MODEL_AI_THINKER
    -DENABLE_SATELLITE_COMM=1
    -DENABLE_IRIDIUM_MODULE=1
    -DENABLE_GPS_TRACKING=1
    -DENABLE_EMERGENCY_BEACON=1
upload_speed = 460800
lib_deps = 
    ${env.lib_deps}
    https://github.com/sparkfun/SparkFun_IridiumSBD_I2C_Arduino_Library.git

; Production Configuration with All Features
[env:esp32cam_production]
board = esp32cam
build_flags = 
    ${env.build_flags}
    -DBOARD_AI_THINKER_CAM
    -DCAMERA_MODEL_AI_THINKER
    -DPRODUCTION_BUILD=1
    -DENABLE_OTA_UPDATES=1
    -DENABLE_SECURE_BOOT=1
    -DENABLE_ENCRYPTION=1
    -DENABLE_BLOCKCHAIN_AUTH=1
    -DOPTIMIZE_FOR_PERFORMANCE=1
upload_speed = 460800
board_build.partitions = partitions_ota.csv

; Unit Testing Configuration
[env:test]
platform = espressif32@6.4.0
board = esp32cam
framework = arduino
test_framework = unity
test_build_src = yes
build_flags = 
    ${env.build_flags}
    -DBOARD_AI_THINKER_CAM
    -DCAMERA_MODEL_AI_THINKER
    -DUNIT_TEST=1
lib_deps = 
    ${env.lib_deps}
test_ignore = 
    test_desktop_*
upload_speed = 460800
monitor_speed = 115200