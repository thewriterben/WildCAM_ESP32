; ESP32 WildCAM PlatformIO Configuration
[platformio]
default_envs = esp32cam

[env]
platform = espressif32@6.4.0
framework = arduino
monitor_speed = 115200
monitor_filters = 
    esp32_exception_decoder
    time
    colorize
lib_deps = 
    espressif/esp32-camera@^2.0.4
    bblanchon/ArduinoJson@^6.21.3
    me-no-dev/ESP Async WebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1
    sandeepmistry/LoRa@^0.8.0

; Main ESP32-CAM build environment
[env:esp32cam]
board = esp32cam
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -DBOARD_AI_THINKER_CAM
    -DCAMERA_MODEL_AI_THINKER
upload_speed = 460800

; Test environment for unit tests
[env:test]
platform = espressif32@6.4.0
board = esp32cam
framework = arduino
test_framework = unity
test_build_src = yes
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -DUNIT_TEST
lib_deps = 
    ${env.lib_deps}
    throwtheswitch/Unity@^2.5.2

; ESP32-S3 with LoRa mesh networking (recommended for full LoRa support)
[env:esp32s3cam_lora]
platform = espressif32@6.4.0
board = esp32-s3-devkitc-1
framework = arduino
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DLORA_ENABLED=true
upload_speed = 921600
monitor_speed = 115200
lib_deps = 
    ${env.lib_deps}
